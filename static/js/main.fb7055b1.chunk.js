(this["webpackJsonpcovitrack-frontend"]=this["webpackJsonpcovitrack-frontend"]||[]).push([[0],{201:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(1),c=n.n(a),o=n(89),i=n.n(o),u=n(22),l=n(15),s=n(19),f=n(50),b=n.n(f),j=n(17),d=n(10),O=n(8),v=n(0),h=n(20),p=n.n(h),m=n(49),x="yyyyMMdd",y=100,g="https://tmikoss.github.io/covitrack",w=n(30),k=Object(w.a)((function(e){return{countries:{},loaded:!1,load:function(){var t=Object(m.a)(p.a.mark((function t(){var n,r,a,c,o,i,u,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(g,"/api/cases.json"));case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,a={},c=Object(O.a)(r);try{for(c.s();!(o=c.n()).done;)i=o.value,u=i.country,l=i.newCases,a[u]=l}catch(s){c.e(s)}finally{c.f()}e({countries:a,loaded:!0});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}})),M=function(e){return e.loaded},E=function(e){return e.load},D=n(95),I=Object(w.a)((function(e){var t=Object(D.a)(new Date,2);return{focusDate:t,minDate:new Date(2020,0,1),maxDate:t,setFocusDate:function(t){return e({focusDate:t})}}})),C=n(32),L=function(e,t){var n=(90-t)*(Math.PI/180),r=(e+180)*(Math.PI/180),a=-100*Math.sin(n)*Math.cos(r),c=y*Math.sin(n)*Math.sin(r);return[a,y*Math.cos(n),c]},P=function(e){var t=e.country,n=t.code,c=t.features,o=Object(l.f)(),i=Object(a.useRef)(k.getState().countries[n]||{}),u=Object(a.useRef)(k.getState().countries.OWID_WRL||{}),f=Object(a.useRef)(Object(C.a)(I.getState().focusDate,x)),b=Object(a.useRef)(new v.Color(o.minLevel)),h=new v.Color(o.maxLevel);Object(a.useEffect)((function(){return k.subscribe((function(e){i.current=e[n]||{},u.current=e.OWID_WRL||{}}),(function(e){return e.countries}))}),[n]),Object(a.useEffect)((function(){return I.subscribe((function(e){return f.current=Object(C.a)(e,x)}),(function(e){return e.focusDate}))}),[n]);var p,m=new v.LineBasicMaterial({color:o.minLevel}),y=[],g=Object(O.a)(c);try{for(g.s();!(p=g.n()).done;){var w,M=p.value.coordinates,E=[],D=Object(O.a)(M);try{for(D.s();!(w=D.n()).done;){var P=w.value,S=L.apply(void 0,Object(j.a)(P));E.push.apply(E,Object(j.a)(S))}}catch(z){D.e(z)}finally{D.f()}var R=new v.BufferGeometry;R.setAttribute("position",new v.Float32BufferAttribute(E,3));var B={geometry:R,material:m};y.push(Object(r.jsx)("line",Object(d.a)({},B),y.length))}}catch(z){g.e(z)}finally{g.f()}return Object(s.b)((function(){var e=i.current[f.current]||0,t=u.current[f.current]||0,n=0;t>0&&(n=e/(5*t)),b.current=new v.Color(o.minLevel).lerp(h,n),m.color.lerp(b.current,.1)})),Object(r.jsx)("group",{children:y})},S=n(203),R=n(204),B=n(99),z=n(94),W=Object(w.a)(Object(z.persist)((function(e){return{countries:[],loaded:!1,load:function(){var t=Object(m.a)(p.a.mark((function t(){var n,r,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(g,"/api/countries.json"));case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,a=b()(r,(function(e){var t=e.code,n=e.name,r=e.geography,a=[];if("MultiPolygon"===r.type){var c,o=Object(O.a)(r.coordinates);try{for(o.s();!(c=o.n()).done;){var i,u=c.value,l=Object(O.a)(u);try{for(l.s();!(i=l.n()).done;){var s=i.value;a.push({coordinates:s})}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}}else{var f,b=Object(O.a)(r.coordinates);try{for(b.s();!(f=b.n()).done;){var j=f.value;a.push({coordinates:j})}}catch(d){b.e(d)}finally{b.f()}}return{code:t,name:n,features:a}})),e({countries:a,loaded:!0});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}),{name:"countries-base-data"})),H=function(e){return e.loaded},F=function(e){return e.load},_=n(67),A=n(101),G=Object(a.memo)((function(){return 0===(Object(A.a)()||{tier:0}).tier?null:Object(r.jsx)(a.Suspense,{fallback:null,children:Object(r.jsx)(_.b,{children:Object(r.jsx)(_.a,{luminanceThreshold:.4,luminanceSmoothing:1,intensity:2},"bloom")})})})),J=function(){var e=Object(l.f)();return Object(r.jsxs)("mesh",{children:[Object(r.jsx)("sphereBufferGeometry",{args:[97,100,100]}),Object(r.jsx)("meshBasicMaterial",{color:e.background,side:1,transparent:!0,opacity:.95})]})},V=function(){var e=Object(l.f)(),t=W(Object(a.useCallback)((function(e){return e.countries}),[])),n=b()(t,(function(e){return Object(r.jsx)(P,{country:e},e.code)}));return Object(r.jsx)(s.a,{onCreated:function(t){return t.gl.setClearColor(e.background)},colorManagement:!1,children:Object(r.jsxs)(l.a.Provider,{value:e,children:[Object(r.jsx)(S.a,{fade:!0,factor:10,radius:320}),Object(r.jsx)("ambientLight",{}),n,Object(r.jsx)(J,{}),Object(r.jsx)(B.a,{makeDefault:!0,near:.001,far:1e3,fov:90,position:[120,120,0]}),Object(r.jsx)(R.a,{enablePan:!1,minDistance:1.1*y,maxDistance:300}),Object(r.jsx)(G,{})]})})},T={background:"#060606",minLevel:"#ffffff",maxLevel:"#ff0000"},q=n(90),K=n(7),N=n(68),Q=n(37),U=n(100),X=n.n(U);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $=a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ee=a.createElement("path",{d:"M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"});function te(e,t){var n=e.title,r=e.titleId,c=Z(e,["title","titleId"]);return a.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,$,ee)}var ne=a.forwardRef(te);n.p;function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ce=a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),oe=a.createElement("path",{d:"M8 5v14l11-7z"});function ie(e,t){var n=e.title,r=e.titleId,c=ae(e,["title","titleId"]);return a.createElement("svg",re({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,ce,oe)}var ue=a.forwardRef(ie);n.p;function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function se(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var fe=a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),be=a.createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"});function je(e,t){var n=e.title,r=e.titleId,c=se(e,["title","titleId"]);return a.createElement("svg",le({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",width:"18px",height:"18px",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,fe,be)}var de=a.forwardRef(je);n.p;function Oe(){var e=Object(u.a)([""]);return Oe=function(){return e},e}function ve(){var e=Object(u.a)([""]);return ve=function(){return e},e}function he(){var e=Object(u.a)([""]);return he=function(){return e},e}function pe(){var e=Object(u.a)(["\n  background-color: transparent;\n  border: none;\n  outline: none;\n  opacity: ",";\n"]);return pe=function(){return e},e}function me(){var e=Object(u.a)(["\n  grid-area: date;\n"]);return me=function(){return e},e}function xe(){var e=Object(u.a)(["\n  grid-area: avg;\n  white-space: nowrap;\n  overflow: hidden;\n"]);return xe=function(){return e},e}function ye(){var e=Object(u.a)(["\n  flex: 1;\n"]);return ye=function(){return e},e}function ge(){var e=Object(u.a)(["\n  grid-area: slider;\n  display: flex;\n  flex-flow: row;\n"]);return ge=function(){return e},e}function we(){var e=Object(u.a)(["\n  width: 100%;\n  position: absolute;\n  top: 0;\n  display: grid;\n  grid-template-columns: 20vw auto 20vw;\n  grid-template-areas: 'date slider avg';\n  align-items: center;\n  color: ",";\n  text-align: center;\n\n  @media only screen and (max-width: 600px) {\n    grid-template-columns: 1fr 1fr;\n    grid-template-areas:\n      'slider slider'\n      'date avg';\n  }\n"]);return we=function(){return e},e}var ke=l.e.div(we(),(function(e){return e.theme.minLevel})),Me=l.e.div(ge()),Ee=l.e.input(ye()),De=l.e.div(xe()),Ie=l.e.div(me()),Ce=l.e.button(pe(),(function(e){return e.disabled?.5:1})),Le=Object(l.e)(de).attrs((function(){return{width:40,height:40}}))(he()),Pe=Object(l.e)(ue).attrs((function(){return{width:40,height:40}}))(ve()),Se=Object(l.e)(ne).attrs((function(){return{width:40,height:40}}))(Oe()),Re={"-5":Object(r.jsx)(Le,{}),"-1":Object(r.jsx)(Se,{transform:"scale(-1, 1)"}),0:Object(r.jsx)(Pe,{transform:"scale(-1, 1)"}),1:Object(r.jsx)(Pe,{transform:"scale(-1, 1)"}),5:Object(r.jsx)(Pe,{transform:"scale(-1, 1)"})},Be={"-5":0,"-1":-5,0:-1,1:-1,5:-1},ze={"-5":Object(r.jsx)(Pe,{}),"-1":Object(r.jsx)(Pe,{}),0:Object(r.jsx)(Pe,{}),1:Object(r.jsx)(Se,{}),5:Object(r.jsx)(Le,{})},We={"-5":1,"-1":1,0:1,1:5,5:0},He=function(){var e=I(),t=e.minDate,n=e.maxDate,c=e.focusDate,o=e.setFocusDate,i=Object(a.useState)(0),u=Object(K.a)(i,2),l=u[0],s=u[1],f=k(Object(a.useCallback)((function(e){return e.countries.OWID_WRL||{}}),[]))[Object(C.a)(c,x)]||0;Object(a.useEffect)((function(){var e=setInterval((function(){var e=Object(Q.a)(c,l);l>0&&e<=n||l<0&&e>=t?o(e):l<0?(o(t),s(0)):l>0&&(o(n),s(0))}),100);return function(){return clearInterval(e)}}),[c,l]);var b=Object(N.a)(n,t),j=Object(N.a)(c,t),d=Object(a.useCallback)((function(){return s((function(e){return Be[e]}))}),[]),O=Object(a.useCallback)((function(){return s((function(e){return We[e]}))}),[]);return Object(r.jsxs)(ke,{children:[Object(r.jsx)(Ie,{children:Object(C.a)(c,"dd.MM.yyyy")}),Object(r.jsxs)(Me,{children:[Object(r.jsx)(Ce,{onClick:d,disabled:c===t,children:Re[l]}),Object(r.jsx)(Ee,{type:"range",min:0,max:b,value:j,onChange:function(e){var n=e.target.value;s(0),o(Object(Q.a)(t,parseInt(n)))}}),Object(r.jsx)(Ce,{onClick:O,disabled:c===n,children:ze[l]})]}),Object(r.jsxs)(De,{children:["avg ",X()(f,2)," new cases / million"]})]})};function Fe(){var e=Object(u.a)(["\n  ","\n\n  #root {\n    height: 100vh;\n    font-family: 'Roboto', sans-serif;\n  }\n"]);return Fe=function(){return e},e}var _e=Object(l.c)(Fe(),q.a),Ae=function(){return function(){var e=W(H),t=W(F);Object(a.useEffect)((function(){e||t()}),[t,e])}(),function(){var e=k(M),t=k(E);Object(a.useEffect)((function(){e||t()}),[t,e])}(),Object(r.jsxs)(l.b,{theme:T,children:[Object(r.jsx)(_e,{}),Object(r.jsx)(V,{}),Object(r.jsx)(He,{})]})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(Ae,{})}),document.getElementById("root"))}},[[201,1,2]]]);
//# sourceMappingURL=main.fb7055b1.chunk.js.map